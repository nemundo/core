<?phpnamespace Nemundo\Core\Xml\Document;use Nemundo\Core\File\File;use Nemundo\Core\Http\Response\HttpResponse;use Nemundo\Core\Http\Response\ResponseType;use Nemundo\Core\Http\Response\StatusCode;abstract class AbstractXmlDocument extends AbstractXmlItem{    protected $filename;    protected $overwriteExistingFile = false;    /**     * @var bool     */    protected $formatOutput = false;    /**     * @var \DOMDocument     */    private $doc;    /**     * @var XmlItem[]     */   // private $itemList = array();    abstract protected function loadDocument();    public function __construct()    {        parent::__construct();        $this->loadDocument();    }    /*public function addItem(XmlItem $item)    {        $this->itemList[] = $item;    }*/    private function createElement(XmlItem $item, $document)    {        //$domElement = $this->doc->createElement($item->tagName, htmlspecialchars($item->value));        $domElement = $this->doc->createElementNS($item->namespace, $item->tagName, $item->value);  //'urn:schemas-etourist:SchemaExtension', 'Pois');        // Attribute hinzufÃ¼gen        foreach ($item->getAttributeList() as $attributeName => $attributeValue) {            $domAttribute = $this->doc->createAttribute($attributeName);            $domAttribute->value = htmlspecialchars($attributeValue);            $domElement->appendChild($domAttribute);        }        $document->appendChild($domElement);        foreach ($item->getData() as $childElement) {            $this->createElement($childElement, $domElement);        }    }    protected function createXml()    {        $this->doc = new \DOMDocument();        $this->doc->formatOutput = $this->formatOutput;        foreach ($this->itemList as $element) {            $this->createElement($element, $this->doc);        }    }    public function getXml()    {        $this->createXml();        return $this->doc->saveXML();    }    public function writeFile($fullFilename)    {        //public function writeFile()        //{        if (!$this->checkProperty('filename')) {            return;        }        $this->createXml();        $path = (new File($this->filename))->getPath();        if (!(new File($path))->fileExists()) {            //    (new Directory($path))->createDirectory();        }        //$this->doc->xmlStandalone = true;        $this->doc->save($fullFilename);    }    protected function render()    {        $response = new HttpResponse();        $response->contentType = ResponseType::XML;  // ContentType::XML;        $response->content = $this->getXml();    }}